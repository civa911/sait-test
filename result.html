<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результат - Тест</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Ваш результат</h1>
        <p id="resultText"></p>
    </div>

    <script>
        const name = localStorage.getItem('name');
        const email = localStorage.getItem('email');
        const answers = JSON.parse(localStorage.getItem('answers'));

        function calculateResult(answers) {
            // Простой пример логики подсчета результата
            const score = answers.reduce((total, answer) => total + parseInt(answer), 0);
            if (score <= 10) return "/img-result/result1.jpg";
            if (score <= 20) return "/img-result/result2.jpg";
            if (score <= 30) return "/img-result/result3.jpg";
            if (score <= 40) return "/img-result/result4.jpg";
            return "Вам нужно стараться больше!";
        }

        const result = calculateResult(answers);
        document.getElementById('resultText').textContent = `${name}, ваш результат: ${result}`;

        // Отправка результата на почту
        fetch('http://localhost:3000/send-email', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ name, email, result })
        })
        .then(response => response.text())
        .then(data => console.log('Response from server:', data))
        .catch(error => console.error('Error:', error));
    </script>
    <script src="server.js"></script>
</body>
</html>
